{% extends 'administrator/base.html' %}
{% load static %}

{% block title %}
EVEREST | {{ profile.user.username }}'s Profile
{% endblock %}

{% block content %}

<main class="container-fluid mx-2">
  <div class="col-lg">
    <div class="card card-signin my-3">
      <div class="card-body">
        <div class="position-relative">
          <div class="position-absolute top-0 end-0">
            <form
              onsubmit="return confirm('WARNING: All account information including login credentials will be deleted in the process. Are you sure you want to delete the user: {{ member.username }}?');"
              method="POST" action="/administrator/members/delete/{{ profile.user.id }}">{% csrf_token %}
              <button type="submit" class="btn btn-danger"><i class="fas fa-trash-alt"></i></button><input type="hidden"
                name="q_id" />
            </form>
          </div>
        </div>
        <br>

        <div class="form-signin">
          <div class="form-label-group">
            <div class="row">
              <div style="text-align: center; align-items: center;">
                <img class="profile-img"
                  style="width: 7rem !important; height: 7rem !important; min-width: 7rem !important; min-height: 7rem !important;"
                  src="{% if profile.user.profile.profile_pic %}{{ profile.user.profile.profile_pic.url }}{% else %}{% static 'img/default-profile-icon.jpg' %}{% endif %}" />
                </div>
              </div>
          </div>
        </div>

        <h3 class="text-center" style="font-weight: bold;">{{ profile.user.first_name }} {{ profile.user.last_name }}</h3>
        <p class="text-center" style="text-align: center; align-items: center; margin-top: -0.7em; font-size: small;">{{ profile.user.email }}</p>
        
        <hr class="my-4">
        <h4>Profile information</h4>
        <div class="my-3">
          <div class="row">
            <div class="col form-label-group">
              <input type="text" name="first_name" value="{{ profile.user.first_name }}" maxlength="200" class="form-control"
                placeholder="First Name" id="id_first_name" disabled>
              <label for="id_first_name">First Name</label>
            </div>
            <div class="col form-label-group">
              <input type="text" name="last_name" value="{{ profile.user.last_name }}" maxlength="200" class="form-control"
                placeholder="Last Name" id="id_last_name" disabled>
              <label for="id_last_name">Last Name</label>
            </div>
          </div>
          
          <div class="row">
            <div class="form-label-group">
              <input type="text" name="affiliation" value="{{ profile.affiliation }}" maxlength="200" class="form-control"
                placeholder="Affiliation" id="id_affiliation" disabled>
              <label for="id_affiliation">Affiliation</label>
            </div>
          </div>
          
          <div class="row">
            <div class="form-label-group">
              <input type="text" name="email" value="{{ profile.user.email }}" maxlength="200" class="form-control"
                placeholder="Email" id="id_email" disabled>
              <label for="id_email">Email</label>
            </div>
          </div>
          
          <div class="row">
            <div class="col form-label-group">
              <input type="text" name="username" value="{{ profile.user.username }}" maxlength="200" class="form-control"
                placeholder="username" id="id_username" disabled>
              <label for="id_username">Username</label>
            </div>
            <div class="col form-label-group">
              <input style="text-transform: uppercase;" type="text" name="date_joined" value="{{ profile.user.date_joined }}"
                maxlength="200" class="form-control" placeholder="Date Joined" id="id_last_name" disabled>
              <label for="id_date_joined">Date Joined</label>
            </div>
          </div>

          <hr class="my-4">

          <div class="row">
            <h4>Events Joined</h4>
            <div class="mx-1">
              <ul>
                {% for event in user_attended_events %}
                <li>{{ event.event.event_name }}</li>
                {% empty %}
                <span><i>No events joined.</i></span>
                {% endfor %}
              </ul>
            </div>
          </div>

          <hr class="my-4">
          
          <div class="row">
            <h4>Transactions History</h4>
            <div class="mx-1">
              <ul>
                {% for transaction in transactions %}
                <li>{{ transaction.is_registration_approved }} - <span style="text-transform: uppercase;">{{ transaction.date_created }}</span> -  {{ transaction.event.event_name }}</li>
                {% empty %}
                <span><i>No transactions made.</i></span>
                {% endfor %}
              </ul>
            </div>
          </div>

        </div>
  
      </div>
    </div>
  </div>
</main>

{% endblock %}